<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            line-height: 1.6;
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .header {
            background: linear-gradient(135deg, #2d5016 0%, #4a7c2a 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-role {
            background: rgba(255,255,255,0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .logout-btn {
            background: #c0392b;
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
        }

        /* Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .container {
            display: flex;
            min-height: calc(100vh - 70px);
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar {
            width: 250px;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            padding: 1rem 0;
        }

        .menu-item {
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            border-right: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .menu-item:hover {
            background: #f0f8f0;
            border-right-color: #4a7c2a;
        }

        .menu-item.active {
            background: #e8f5e8;
            border-right-color: #2d5016;
            font-weight: 600;
            color: #2d5016;
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        }

        .card-title {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }

        .card-value {
            font-size: 2rem;
            font-weight: 700;
            color: #2d5016;
        }

        .card-subtitle {
            font-size: 0.85rem;
            color: #95a5a6;
            margin-top: 0.5rem;
        }

        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
        .data-table {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin-top: 1.5rem;
            overflow-x: auto;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .table-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .table-actions {
            display: flex;
            gap: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 0.8rem;
            text-align: right;
            border-bottom: 1px solid #ecf0f1;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2d5016;
        }

        tr:hover {
            background: #f8fdf8;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #4a7c2a;
            color: white;
        }

        .btn-primary:hover {
            background: #2d5016;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: 0.85rem;
        }

        /* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.3rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.6rem;
            border: 1px solid #dcdde1;
            border-radius: 5px;
            font-family: 'Cairo', sans-serif;
        }

        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .alerts-section {
            background: #fff3cd;
            border-right: 4px solid #ffc107;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1.5rem;
        }

        .alert-item {
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© */
        .financial-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .financial-card {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-right: 4px solid #4a7c2a;
        }

        .financial-card.expense {
            border-right-color: #e74c3c;
        }

        .financial-card.income {
            border-right-color: #27ae60;
        }

        .financial-card.profit {
            border-right-color: #3498db;
        }

        /* Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                display: flex;
                overflow-x: auto;
                padding: 0.5rem;
            }
            
            .menu-item {
                white-space: nowrap;
                border-right: none;
                border-bottom: 3px solid transparent;
            }
            
            .menu-item.active {
                border-right: none;
                border-bottom-color: #2d5016;
            }
            
            .header h1 {
                font-size: 1.3rem;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #7f8c8d;
        }

        .status-badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-danger {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="header">
        <h1>ğŸŒ¾ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h1>
        <div class="user-info">
            <span class="user-role" id="userRole">Ø§Ù„Ù…Ø¯ÙŠØ±</span>
            <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="container">
        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
        <div class="sidebar">
            <div class="menu-item active" onclick="showSection('dashboard')">
                ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            </div>
            <div class="menu-item" onclick="showSection('lands')">
                ğŸï¸ Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
            </div>
            <div class="menu-item" onclick="showSection('livestock')">
                ğŸ‘ Ø§Ù„Ù‚Ø·ÙŠØ¹
            </div>
            <div class="menu-item" onclick="showSection('health')">
                ğŸ’Š Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØµØ­ÙŠØ©
            </div>
            <div class="menu-item" onclick="showSection('births')">
                ğŸ¼ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø§Øª
            </div>
            <div class="menu-item" onclick="showSection('feeding')">
                ğŸŒ¾ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
            </div>
            <div class="menu-item" onclick="showSection('finance')">
                ğŸ’° Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            </div>
            <div class="menu-item" onclick="showSection('inventory')">
                ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            </div>
            <div class="menu-item" onclick="showSection('equipment')">
                ğŸšœ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
        <div class="main-content">
            <!-- Ù‚Ø³Ù… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
            <div id="dashboard" class="page-section active">
                <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
                
                <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© -->
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</div>
                        <div class="card-value" id="totalArea">56</div>
                        <div class="card-subtitle">Ù‡ÙƒØªØ§Ø±</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù†Ø´Ø·Ø©</div>
                        <div class="card-value" id="activeProjects">7</div>
                        <div class="card-subtitle">Ù…Ø´Ø±ÙˆØ¹</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Ø§Ù„Ù‚Ø·ÙŠØ¹</div>
                        <div class="card-value" id="livestockCount">99</div>
                        <div class="card-subtitle">Ø±Ø£Ø³ (40 Ù†Ø¹Ø¬Ø© + 50 Ø­Ù…Ù„ + 9 ÙƒØ¨Ø§Ø´)</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø§Ø¡</div>
                        <div class="card-value">âš ï¸</div>
                        <div class="card-subtitle">Ù…ØªÙˆØ³Ø·Ø© - ÙŠØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©</div>
                    </div>
                </div>

                <!-- Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
                <div class="alerts-section">
                    <h3 style="margin-bottom: 0.5rem;">âš ï¸ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h3>
                    <div class="alert-item">ğŸ“… Ù…ÙˆØ¹Ø¯ ØªØ·Ø¹ÙŠÙ… Ø§Ù„Ù‚Ø·ÙŠØ¹ Ù‚Ø±ÙŠØ¨ (15 ÙŠÙˆÙ…)</div>
                    <div class="alert-item">ğŸ“¦ Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø´Ø¹ÙŠØ± Ù…Ù†Ø®ÙØ¶ (20 Ù‚Ù†Ø·Ø§Ø± Ù…ØªØ¨Ù‚ÙŠ)</div>
                    <div class="alert-item">ğŸ’§ Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙŠ ÙŠØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø© Ø¯ÙˆØ±ÙŠØ©</div>
                </div>

                <!-- Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ -->
                <div class="financial-summary">
                    <div class="financial-card expense">
                        <div class="card-title">Ù…ØµØ§Ø±ÙŠÙ Ø£ÙƒØªÙˆØ¨Ø±</div>
                        <div class="card-value">105M</div>
                        <div class="card-subtitle">Ø¯ÙŠÙ†Ø§Ø±</div>
                    </div>
                    <div class="financial-card income">
                        <div class="card-title">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</div>
                        <div class="card-value">---</div>
                        <div class="card-subtitle">Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«</div>
                    </div>
                    <div class="financial-card profit">
                        <div class="card-title">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­/Ø§Ù„Ø®Ø³Ø§Ø¦Ø±</div>
                        <div class="card-value">---</div>
                        <div class="card-subtitle">Ù‚ÙŠØ¯ Ø§Ù„Ø­Ø³Ø§Ø¨</div>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ -->
            <div id="lands" class="page-section">
                <h2>Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</h2>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addLand()">+ Ø¥Ø¶Ø§ÙØ© Ø£Ø±Ø¶</button>
                            <button class="btn btn-success btn-sm" onclick="exportCSV('lands')">ØªØµØ¯ÙŠØ± CSV</button>
                        </div>
                    </div>
                    <table id="landsTable">
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ù…Ø§Ù„Ùƒ</th>
                                <th>Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù‡ÙƒØªØ§Ø±)</th>
                                <th>Ù…Ø³Ù‚ÙŠ</th>
                                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="landsTableBody">
                            <tr><td colspan="5" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ù‚Ø·ÙŠØ¹ -->
            <div id="livestock" class="page-section">
                <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚Ø·ÙŠØ¹</h2>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Ø§Ù„Ù†Ø¹Ø§Ø¬</div>
                        <div class="card-value">40</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Ø§Ù„Ø­Ù…Ù„Ø§Ù†</div>
                        <div class="card-value">50</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Ø§Ù„ÙƒØ¨Ø§Ø´</div>
                        <div class="card-value">9</div>
                    </div>
                </div>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø³Ø¬Ù„ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addAnimal()">+ Ø¥Ø¶Ø§ÙØ© Ø­ÙŠÙˆØ§Ù†</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ø±Ø£Ø³</th>
                                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th>
                                <th>Ø§Ù„Ø¬Ù†Ø³</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="animalsTableBody">
                            <tr><td colspan="6" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØµØ­ÙŠØ© -->
            <div id="health" class="page-section">
                <h2>Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØµØ­ÙŠØ©</h2>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù„Ù‚Ø§Ø­Ø§Øª ÙˆØ§Ù„Ø¹Ù„Ø§Ø¬</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addHealthRecord()">+ Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ø­ÙŠÙˆØ§Ù†</th>
                                <th>Ø§Ù„Ù„Ù‚Ø§Ø­Ø§Øª</th>
                                <th>Ø§Ù„Ø£Ù…Ø±Ø§Ø¶</th>
                                <th>Ø§Ù„Ø¹Ù„Ø§Ø¬</th>
                                <th>Ø¢Ø®Ø± ÙØ­Øµ</th>
                                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="healthTableBody">
                            <tr><td colspan="6" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„ÙˆÙ„Ø§Ø¯Ø§Øª -->
            <div id="births" class="page-section">
                <h2>Ø³Ø¬Ù„ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø§Øª</h2>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø§Ù„ÙˆÙ„Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØªÙ„Ù‚ÙŠØ­</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addBirth()">+ ØªØ³Ø¬ÙŠÙ„ ÙˆÙ„Ø§Ø¯Ø©</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ù†Ø¹Ø¬Ø©</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ„Ù‚ÙŠØ­</th>
                                <th>Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</th>
                                <th>Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©</th>
                                <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</th>
                                <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØªÙ‰</th>
                                <th>Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆØ²Ù†</th>
                            </tr>
                        </thead>
                        <tbody id="birthsTableBody">
                            <tr><td colspan="7" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„ØªØºØ°ÙŠØ© -->
            <div id="feeding" class="page-section">
                <h2>Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø³Ø¬Ù„ Ø§Ù„ØªØºØ°ÙŠØ©</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addFeedLog()">+ ØªØ³Ø¬ÙŠÙ„ ÙŠÙˆÙ…ÙŠ</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø¤ÙˆØ³</th>
                                <th>Ø´Ø¹ÙŠØ± (ÙƒØº)</th>
                                <th>ØªØ¨Ù† (ÙƒØº)</th>
                                <th>Ø¹Ù„Ù Ù…Ø±ÙƒØ²</th>
                                <th>ÙØµÙØµØ©</th>
                                <th>Ø£Ù…Ù„Ø§Ø­</th>
                                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="feedingTableBody">
                            <tr><td colspan="8" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
            <div id="finance" class="page-section">
                <h2>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h2>
                
                <div class="financial-summary">
                    <div class="financial-card expense">
                        <div class="card-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</div>
                        <div class="card-value" id="totalExpenses">105M</div>
                    </div>
                    <div class="financial-card income">
                        <div class="card-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
                        <div class="card-value" id="totalSales">0</div>
                    </div>
                    <div class="financial-card profit">
                        <div class="card-title">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­/Ø§Ù„Ø®Ø³Ø§Ø±Ø©</div>
                        <div class="card-value" id="netProfit">-105M</div>
                    </div>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addExpense()">+ Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯</button>
                            <button class="btn btn-success btn-sm" onclick="exportCSV('expenses')">ØªØµØ¯ÙŠØ±</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„ÙØ¦Ø©</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                <th>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</th>
                            </tr>
                        </thead>
                        <tbody id="expensesTableBody">
                            <tr><td colspan="5" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addSale()">+ Ù…Ø¨ÙŠØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                <th>Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                                <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                                <th>Ø§Ù„Ù…Ø´ØªØ±ÙŠ</th>
                            </tr>
                        </thead>
                        <tbody id="salesTableBody">
                            <tr><td colspan="6" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø§Ù„Ù‚Ø±ÙˆØ¶</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addLoan()">+ Ù‚Ø±Ø¶ Ø¬Ø¯ÙŠØ¯</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ø¯Ø§Ø¦Ù†</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>
                                <th>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            </tr>
                        </thead>
                        <tbody id="loansTableBody">
                            <tr><td colspan="5" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
            <div id="inventory" class="page-section">
                <h2>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ÙˆØ§Ø¯</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addInventoryItem()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø©</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                                <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody">
                            <tr><td colspan="6" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ø§Øª -->
            <div id="equipment" class="page-section">
                <h2>Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©</h2>
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">Ø§Ù„Ù…Ø¹Ø¯Ø§Øª</div>
                        <div class="table-actions">
                            <button class="btn btn-primary btn-sm" onclick="addEquipment()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø©</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                <th>Ø§Ù„Ø³Ù†Ø©</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
                                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="equipmentTableBody">
                            <tr><td colspan="6" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ø¹Ø§Ù… Ù„Ù„Ù†Ù…Ø§Ø°Ø¬ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">Ù†Ù…ÙˆØ°Ø¬</h3>
            <div id="modalBody"></div>
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="submitModal()">Ø­ÙØ¸</button>
                <button class="btn btn-secondary" onclick="closeModal()">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // ============================================
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Supabase - Ø¶Ø¹ Ù…ÙØ§ØªÙŠØ­Ùƒ Ù‡Ù†Ø§
        // ============================================
        const SUPABASE_URL = 'https://sstvsknmmhbwubzajeix.supabase.co'; // Ù…Ø«Ø§Ù„: https://xxxxx.supabase.co
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzdHZza25tbWhid3ViemFqZWl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzNDM0NjIsImV4cCI6MjA3NDkxOTQ2Mn0.EeVUU9DxRYUi38nUHgWEsnG8li7KZjqAGPNW9IDokhg';
        
        // ØªÙ‡ÙŠØ¦Ø© Supabase
        let supabase = null;
        if (SUPABASE_URL !== 'YOUR_SUPABASE_URL' && SUPABASE_KEY !== 'YOUR_SUPABASE_ANON_KEY') {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        }

        // ============================================
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ© (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø¯ÙˆÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª)
        // ============================================
        let localData = {
            lands: [
                {id: 1, owner:"Ù‡Ø§Ø´Ù…", hectares:11, irrigated:true, notes:"Ù…Ø±Ø¹ÙŠ Ù„Ù„Ø£ØºÙ†Ø§Ù… ÙÙŠ Ø§Ù„ØµÙŠÙ"},
                {id: 2, owner:"ÙØªØ­ÙŠ", hectares:15, irrigated:true, notes:"Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† Ø§Ù„ØªÙŠÙ† ÙÙ‚Ø·"},
                {id: 3, owner:"ØµÙÙŠØ©", hectares:10, irrigated:true, notes:"Ù…Ø±Ø¹ÙŠ Ù„Ù„Ø£ØºÙ†Ø§Ù… ÙÙŠ Ø§Ù„ØµÙŠÙ"},
                {id: 4, owner:"Ø´Ø®Øµ Ø¢Ø®Ø±", hectares:6, irrigated:true, notes:"Ù…Ø³Ù‚ÙŠ Ø¨Ø§Ù„Ø¨ÙŠØ± - Ù…Ø²Ø±ÙˆØ¹Ø© ÙØµÙØµØ©"},
                {id: 5, owner:"Ø¥Ø³Ù„Ø§Ù…", hectares:8, irrigated:true, notes:"4 Ù‡ÙƒØªØ§Ø± Ù‚Ù…Ø­ØŒ 4 Ù‡ÙƒØªØ§Ø± Ù…Ø±Ø¹Ù‰"},
                {id: 6, owner:"Ø¨Ø±Ø§Ù‡ÙŠÙ…", hectares:4, irrigated:false, notes:"Ø²Ø±Ø¹ Ø´Ø¹ÙŠØ±"},
                {id: 7, owner:"Ø¨Ø±Ø§Ù‡ÙŠÙ…", hectares:2, irrigated:false, notes:"Ø²Ø±Ø¹ Ø´Ø¹ÙŠØ±"}
            ],
            equipment: [
                {id: 1, name:"Ø¬Ø±Ø§Ø±", type:"Ø¢Ù„Ø© Ø²Ø±Ø§Ø¹ÙŠØ©", year:"2014", status:"Ø¬ÙŠØ¯", location:"Ù…Ù†Ø²Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"},
                {id: 2, name:"Ù…Ø­Ø±Ø§Ø«", type:"Ø¢Ù„Ø© Ø²Ø±Ø§Ø¹ÙŠØ©", year:"2010", status:"Ø¬ÙŠØ¯", location:"Ù…Ù†Ø²Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"},
                {id: 3, name:"Ø®Ø±Ø¨Ø§Ø´", type:"Ø¢Ù„Ø© Ø²Ø±Ø§Ø¹ÙŠØ©", year:"2012", status:"Ù…ØªÙˆØ³Ø·", location:"Ù…Ù†Ø²Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"},
                {id: 4, name:"ÙƒÙˆÙØ±", type:"Ø¢Ù„Ø© Ø²Ø±Ø§Ø¹ÙŠØ©", year:"2015", status:"Ø¬ÙŠØ¯", location:"Ù…Ù†Ø²Ù„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"}
            ],
            inventory: [
                {id: 1, item_name:"ØªØ¨Ù† Ù„Ù„Ø¨ÙŠØ¹", quantity:700, unit:"Ø¨Ø§Ù„Ø©", location:"Ù…Ø³ØªÙˆØ¯Ø¹", notes:"Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨ÙŠØ¹"},
                {id: 2, item_name:"ØªØ¨Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ", quantity:912, unit:"Ø¨Ø§Ù„Ø©", location:"Ù…Ø³ØªÙˆØ¯Ø¹", notes:""},
                {id: 3, item_name:"Ø´Ø¹ÙŠØ±", quantity:441, unit:"Ø¨Ø§Ù„Ø©", location:"Ù…Ø³ØªÙˆØ¯Ø¹", notes:""},
                {id: 4, item_name:"Ø´Ø¹ÙŠØ±", quantity:20, unit:"Ù‚Ù†Ø·Ø§Ø±", location:"Ù…Ø³ØªÙˆØ¯Ø¹", notes:"Ù…Ù†Ø®ÙØ¶"},
                {id: 5, item_name:"Ù†Ø®Ø§Ù„Ø©", quantity:60, unit:"Ù‚Ù†Ø·Ø§Ø±", location:"Ù…Ø³ØªÙˆØ¯Ø¹", notes:""}
            ],
            animals: [],
            health_records: [],
            births: [],
            feed_log: [],
            expenses: [
                {id: 1, date:"2024-10-01", category:"ÙƒÙ‡Ø±Ø¨Ø§Ø¡", amount:1800000, notes:"ÙØ§ØªÙˆØ±Ø© Ø£ÙƒØªÙˆØ¨Ø±", project_id:null},
                {id: 2, date:"2024-10-01", category:"Ø¹Ù…Ø§Ù„", amount:3000000, notes:"Ø±ÙˆØ§ØªØ¨ Ø´Ù‡Ø±ÙŠØ©", project_id:null},
                {id: 3, date:"2024-10-01", category:"Ø¨Ø°ÙˆØ± ÙˆØ£Ø³Ù…Ø¯Ø©", amount:60000000, notes:"Ù…ÙˆØ³Ù… Ø§Ù„Ø²Ø±Ø§Ø¹Ø©", project_id:null},
                {id: 4, date:"2024-10-01", category:"ÙØµÙØµØ©", amount:40000000, notes:"Ø´Ø±Ø§Ø¡ ÙØµÙØµØ©", project_id:null}
            ],
            sales: [],
            loans: [
                {id: 1, creditor:"Ø±ÙŠØ§Ø¶ Ø§Ù„Ù‚ÙŠØ±Ø§ØªÙŠ", amount:2, paid:0},
                {id: 2, creditor:"Ø§Ù…ÙŠÙ† Ø¨Ù„Ø®Ø±Ø´ÙˆØ´", amount:7, paid:0},
                {id: 3, creditor:"Ø±Ù…Ø²ÙŠ Ø·ÙŠØ§Ø±", amount:2, paid:0},
                {id: 4, creditor:"Ù…ØµØ·ÙÙŠ ØºÙØ§Ø±", amount:8.5, paid:0},
                {id: 5, creditor:"Ù…Ø¯Ø§Ù†ÙŠ Ù†ÙˆØ§Ø¯ÙŠ", amount:9.8, paid:0},
                {id: 6, creditor:"Ø³ÙˆÙÙŠ Ù‚Ø±ÙˆØ·", amount:4.5, paid:0},
                {id: 7, creditor:"Ø­Ù…Ø²Ø©", amount:8, paid:0},
                {id: 8, creditor:"Ù†Ø§ØµØ±", amount:7, paid:0}
            ]
        };

        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙ†Ù‚Ù„
        // ============================================
        function showSection(sectionId) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            document.getElementById(sectionId).classList.add('active');
            
            // ØªÙØ¹ÙŠÙ„ Ø¹Ù†ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            event.currentTarget.classList.add('active');
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù‚Ø³Ù…
            loadSectionData(sectionId);
        }

        // ============================================
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        // ============================================
        async function loadSectionData(sectionId) {
            switch(sectionId) {
                case 'lands':
                    await loadLands();
                    break;
                case 'livestock':
                    await loadAnimals();
                    break;
                case 'health':
                    await loadHealthRecords();
                    break;
                case 'births':
                    await loadBirths();
                    break;
                case 'feeding':
                    await loadFeedLog();
                    break;
                case 'finance':
                    await loadFinance();
                    break;
                case 'inventory':
                    await loadInventory();
                    break;
                case 'equipment':
                    await loadEquipment();
                    break;
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ
        async function loadLands() {
            const tbody = document.getElementById('landsTableBody');
            
            if (supabase) {
                const { data, error } = await supabase.from('lands').select('*');
                if (error) {
                    tbody.innerHTML = '<tr><td colspan="5">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</td></tr>';
                    return;
                }
                localData.lands = data;
            }
            
            tbody.innerHTML = localData.lands.map(land => `
                <tr>
                    <td>${land.owner}</td>
                    <td>${land.hectares}</td>
                    <td>${land.irrigated ? 'âœ… Ù†Ø¹Ù…' : 'âŒ Ù„Ø§'}</td>
                    <td>${land.notes || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-warning" onclick="editLand(${land.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteLand(${land.id})">Ø­Ø°Ù</button>
                    </td>
                </tr>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª
        async function loadAnimals() {
            const tbody = document.getElementById('animalsTableBody');
            
            if (localData.animals.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª - Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© Ø­ÙŠÙˆØ§Ù†" Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</td></tr>';
                return;
            }
            
            tbody.innerHTML = localData.animals.map(animal => `
                <tr>
                    <td>${animal.tag_number}</td>
                    <td>${animal.species}</td>
                    <td>${animal.birth_date || '-'}</td>
                    <td>${animal.sex}</td>
                    <td><span class="status-badge status-active">${animal.status}</span></td>
                    <td>
                        <button class="btn btn-sm btn-warning" onclick="editAnimal(${animal.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                    </td>
                </tr>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØµØ­ÙŠØ©
        async function loadHealthRecords() {
            const tbody = document.getElementById('healthTableBody');
            
            if (localData.health_records.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ØµØ­ÙŠØ©</td></tr>';
                return;
            }
            
            tbody.innerHTML = localData.health_records.map(record => `
                <tr>
                    <td>${record.animal_id}</td>
                    <td>${record.vaccine_list || '-'}</td>
                    <td>${record.diseases || '-'}</td>
                    <td>${record.treatments || '-'}</td>
                    <td>${record.last_check_date || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-warning" onclick="editHealthRecord(${record.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                    </td>
                </tr>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø§Øª
        async function loadBirths() {
            const tbody = document.getElementById('birthsTableBody');
            
            if (localData.births.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ÙˆÙ„Ø§Ø¯Ø§Øª</td></tr>';
                return;
            }
            
            tbody.innerHTML = localData.births.map(birth => `
                <tr>
                    <td>${birth.ewe_tag}</td>
                    <td>${birth.mating_date || '-'}</td>
                    <td>${birth.expected_birth_date || '-'}</td>
                    <td>${birth.actual_birth_date || '-'}</td>
                    <td>${birth.live_count}</td>
                    <td>${birth.dead_count}</td>
                    <td>${birth.birth_weight_avg || '-'} ÙƒØº</td>
                </tr>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„ØªØºØ°ÙŠØ©
        async function loadFeedLog() {
            const tbody = document.getElementById('feedingTableBody');
            
            if (localData.feed_log.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ØªØºØ°ÙŠØ©</td></tr>';
                return;
            }
            
            tbody.innerHTML = localData.feed_log.map(log => `
                <tr>
                    <td>${log.date}</td>
                    <td>${log.heads_count}</td>
                    <td>${log.barley_kg}</td>
                    <td>${log.straw_kg}</td>
                    <td>${log.concentrate_kg || '-'}</td>
                    <td>${log.fescue_kg || '-'}</td>
                    <td>${log.minerals || '-'}</td>
                    <td>${log.notes || '-'}</td>
                </tr>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠØ©
        async function loadFinance() {
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
            const expensesTbody = document.getElementById('expensesTableBody');
            expensesTbody.innerHTML = localData.expenses.map(expense => `
                <tr>
                    <td>${expense.date}</td>
                    <td>${expense.category}</td>
                    <td>${expense.amount.toLocaleString()} Ø¯Ø¬</td>
                    <td>${expense.notes || '-'}</td>
                    <td>${expense.project_id || '-'}</td>
                </tr>
            `).join('');

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
            const salesTbody = document.getElementById('salesTableBody');
            if (localData.sales.length === 0) {
                salesTbody.innerHTML = '<tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©</td></tr>';
            }

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±ÙˆØ¶
            const loansTbody = document.getElementById('loansTableBody');
            loansTbody.innerHTML = localData.loans.map(loan => {
                const remaining = loan.amount - loan.paid;
                const status = remaining === 0 ? 'Ù…Ø³Ø¯Ø¯' : 'Ù‚Ø§Ø¦Ù…';
                return `
                    <tr>
                        <td>${loan.creditor}</td>
                        <td>${loan.amount} Ù‚Ù†Ø·Ø§Ø±</td>
                        <td>${loan.paid} Ù‚Ù†Ø·Ø§Ø±</td>
                        <td>${remaining} Ù‚Ù†Ø·Ø§Ø±</td>
                        <td><span class="status-badge ${remaining === 0 ? 'status-active' : 'status-warning'}">${status}</span></td>
                    </tr>
                `;
            }).join('');

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            const totalExpenses = localData.expenses.reduce((sum, e) => sum + e.amount, 0);
            const totalSales = localData.sales.reduce((sum, s) => sum + s.total, 0);
            document.getElementById('totalExpenses').textContent = (totalExpenses / 1000000).toFixed(1) + 'M';
            document.getElementById('totalSales').textContent = (totalSales / 1000000).toFixed(1) + 'M';
            document.getElementById('netProfit').textContent = ((totalSales - totalExpenses) / 1000000).toFixed(1) + 'M';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        async function loadInventory() {
            const tbody = document.getElementById('inventoryTableBody');
            
            tbody.innerHTML = localData.inventory.map(item => {
                let statusClass = 'status-active';
                let statusText = 'Ø¬ÙŠØ¯';
                
                if (item.notes && item.notes.includes('Ù…Ù†Ø®ÙØ¶')) {
                    statusClass = 'status-warning';
                    statusText = 'Ù…Ù†Ø®ÙØ¶';
                }
                
                return `
                    <tr>
                        <td>${item.item_name}</td>
                        <td>${item.quantity}</td>
                        <td>${item.unit}</td>
                        <td>${item.location}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>${item.notes || '-'}</td>
                    </tr>
                `;
            }).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª
        async function loadEquipment() {
            const tbody = document.getElementById('equipmentTableBody');
            
            tbody.innerHTML = localData.equipment.map(eq => `
                <tr>
                    <td>${eq.name}</td>
                    <td>${eq.type}</td>
                    <td>${eq.year}</td>
                    <td><span class="status-badge status-active">${eq.status}</span></td>
                    <td>${eq.location}</td>
                    <td>${eq.notes || '-'}</td>
                </tr>
            `).join('');
        }

        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù€ Modal
        // ============================================
        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function submitModal() {
            // Ù‡Ù†Ø§ ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ­ÙØ¸Ù‡Ø§
            alert('ØªÙ… Ø§Ù„Ø­ÙØ¸! (ÙŠØ­ØªØ§Ø¬ Ø±Ø¨Ø· Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)');
            closeModal();
        }

        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        // ============================================
        function addLand() {
            document.getElementById('modalTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ø£Ø±Ø¶ Ø¬Ø¯ÙŠØ¯Ø©';
            document.getElementById('modalBody').innerHTML = `
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ</label>
                    <input type="text" id="landOwner" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ">
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù‡ÙƒØªØ§Ø±)</label>
                    <input type="number" id="landHectares" placeholder="Ø§Ù„Ù…Ø³Ø§Ø­Ø©">
                </div>
                <div class="form-group">
                    <label>Ù…Ø³Ù‚ÙŠØŸ</label>
                    <select id="landIrrigated">
                        <option value="true">Ù†Ø¹Ù…</option>
                        <option value="false">Ù„Ø§</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                    <textarea id="landNotes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª"></textarea>
                </div>
            `;
            document.getElementById('modal').classList.add('active');
        }

        function addAnimal() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø­ÙŠÙˆØ§Ù† (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addHealthRecord() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ ØµØ­ÙŠ (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addBirth() {
            alert('Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ ÙˆÙ„Ø§Ø¯Ø© (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addFeedLog() {
            alert('Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ ØªØºØ°ÙŠØ© ÙŠÙˆÙ…ÙŠØ© (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addExpense() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addSale() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ø¨ÙŠØ¹Ø© (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addLoan() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù‚Ø±Ø¶ (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addInventoryItem() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ù„Ù„Ù…Ø®Ø²ÙˆÙ† (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function addEquipment() {
            alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø© (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØµØ¯ÙŠØ± CSV
        // ============================================
        function exportCSV(tableName) {
            const data = localData[tableName];
            if (!data || data.length === 0) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±');
                return;
            }

            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ CSV
            const headers = Object.keys(data[0]);
            const csvContent = [
                headers.join(','),
                ...data.map(row => headers.map(header => row[header]).join(','))
            ].join('\n');

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${tableName}_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø£Ø®Ø±Ù‰
        // ============================================
        function logout() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
                // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„ÙØ¹Ù„ÙŠ
            }
        }

        function editLand(id) {
            alert('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø±Ø¶ #' + id + ' (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)');
        }

        function deleteLand(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ø¶ØŸ')) {
                localData.lands = localData.lands.filter(l => l.id !== id);
                loadLands();
            }
        }

        // ============================================
        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
        // ============================================
        window.addEventListener('DOMContentLoaded', () => {
            loadSectionData('dashboard');
            
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Supabase
            if (!supabase) {
                console.warn('âš ï¸ Ù„Ù… ÙŠØªÙ… ØªÙƒÙˆÙŠÙ† Supabase. Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©.');
                console.log('ğŸ“ Ù„ØªÙØ¹ÙŠÙ„ SupabaseØŒ Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« SUPABASE_URL Ùˆ SUPABASE_KEY ÙÙŠ Ø§Ù„ÙƒÙˆØ¯');
            }
        });
    </script>
</body>
</html>